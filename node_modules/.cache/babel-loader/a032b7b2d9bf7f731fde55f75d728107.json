{"ast":null,"code":"import _objectSpread from\"/Users/jggarcon/Desktop/Projects/netflix-clone/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/jggarcon/Desktop/Projects/netflix-clone/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/jggarcon/Desktop/Projects/netflix-clone/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/jggarcon/Desktop/Projects/netflix-clone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/jggarcon/Desktop/Projects/netflix-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import'./App.css';import Navbar from'./components/Navbar';import Card from'./components/Card';import Cart from'./components/Cart';import TopMovies from'./components/TopMovies';import PriceButton from'./components/PriceButton';import SearchInput from'./components/SearchInput';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),moviesInBasket=_useState4[0],setMoviesInBasket=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),basketFinalPrice=_useState6[0],setBasketFinalPrice=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),moviesNameFilter=_useState8[0],setMoviesNameFilter=_useState8[1];useEffect(function(){function populateMovies(){return _populateMovies.apply(this,arguments);}function _populateMovies(){_populateMovies=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,_yield$response$json,results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://tmdb-proxy-workers.vhfmag.workers.dev/3/discover/movie?language=pt-BR');case 2:response=_context.sent;_context.next=5;return response.json();case 5:_yield$response$json=_context.sent;results=_yield$response$json.results;setMovies(results);case 8:case\"end\":return _context.stop();}}},_callee);}));return _populateMovies.apply(this,arguments);}populateMovies();},[]);function filterMovie(movie){if(!moviesNameFilter)return movie;if(movie.title.includes(moviesNameFilter)){return movie;}}function getDiscountedPrice(price){return Number(price.toFixed(2));}function handleMovieBuy(movie){var newMovies=_toConsumableArray(moviesInBasket);var movieInBasket=newMovies.find(function(_ref){var title=_ref.title;return title===movie.title;});if(movieInBasket){movieInBasket.count++;setMoviesInBasket(newMovies);var _newPrice=getDiscountedPrice(movieInBasket.price+basketFinalPrice);setBasketFinalPrice(_newPrice);return;}newMovies.push({title:movie.title,backgroundImg:movie.poster_path,price:movie.price,count:1});setMoviesInBasket(newMovies);var newPrice=getDiscountedPrice(movie.price+basketFinalPrice);setBasketFinalPrice(newPrice);}function handleMovieAdd(movieTitle){var newMovies=_toConsumableArray(moviesInBasket);var movieInBasket=newMovies.find(function(_ref2){var title=_ref2.title;return title===movieTitle;});movieInBasket.count++;setMoviesInBasket(newMovies);var newPrice=getDiscountedPrice(movieInBasket.price+basketFinalPrice);setBasketFinalPrice(newPrice);}function handleMovieRemoval(movieTitle){var newMovies=_toConsumableArray(moviesInBasket);var movieInBasket=newMovies.find(function(_ref3){var title=_ref3.title;return title===movieTitle;});var newPrice=getDiscountedPrice(basketFinalPrice-movieInBasket.price);setBasketFinalPrice(newPrice);movieInBasket.count--;if(movieInBasket.count===0){setMoviesInBasket(newMovies.filter(function(_ref4){var title=_ref4.title;return title!==movieTitle;}));return;}setMoviesInBasket(newMovies);}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Navbar,{setMoviesNameFilter:setMoviesNameFilter}),/*#__PURE__*/_jsxs(\"main\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top-movies\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Top Movies\"}),/*#__PURE__*/_jsx(\"div\",{className:\"movies-grid\",children:movies.slice(0,5).map(function(movie){return/*#__PURE__*/_jsx(Card,_objectSpread(_objectSpread({},movie),{},{handleMovieBuy:handleMovieBuy}));})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"movies\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Movies\"}),/*#__PURE__*/_jsx(\"div\",{className:\"movies-grid\",children:movies.filter(filterMovie).map(function(movie){return/*#__PURE__*/_jsx(Card,_objectSpread(_objectSpread({},movie),{},{handleMovieBuy:handleMovieBuy}));})})]})]}),/*#__PURE__*/_jsx(Cart,{className:\"bag\",moviesInBasket:moviesInBasket,finalPrice:basketFinalPrice,handleMovieAdd:handleMovieAdd,handleMovieRemoval:handleMovieRemoval})]});}export default App;","map":{"version":3,"sources":["/Users/jggarcon/Desktop/Projects/netflix-clone/src/App.js"],"names":["useEffect","useState","Navbar","Card","Cart","TopMovies","PriceButton","SearchInput","App","movies","setMovies","moviesInBasket","setMoviesInBasket","basketFinalPrice","setBasketFinalPrice","moviesNameFilter","setMoviesNameFilter","populateMovies","fetch","response","json","results","filterMovie","movie","title","includes","getDiscountedPrice","price","Number","toFixed","handleMovieBuy","newMovies","movieInBasket","find","count","newPrice","push","backgroundImg","poster_path","handleMovieAdd","movieTitle","handleMovieRemoval","filter","slice","map"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport './App.css';\nimport Navbar from './components/Navbar';\nimport Card from './components/Card';\nimport Cart from './components/Cart';\nimport TopMovies from './components/TopMovies';\nimport PriceButton from './components/PriceButton';\nimport SearchInput from './components/SearchInput';\n\n\nfunction App() {\n\n  const [movies, setMovies] = useState([])\n  const [moviesInBasket, setMoviesInBasket] = useState([]);\n  const [basketFinalPrice, setBasketFinalPrice] = useState(0);\n  const [moviesNameFilter, setMoviesNameFilter] = useState(\"\");\n\n  useEffect(() => {\n  async function populateMovies() {\n    const response = await fetch('https://tmdb-proxy-workers.vhfmag.workers.dev/3/discover/movie?language=pt-BR');\n    const { results} = await response.json();\n    \n    setMovies(results);\n\n  } \n    populateMovies(); \n  }, []);\n  \n  function filterMovie(movie) {\n    if (!moviesNameFilter) return movie;\n\n    if (movie.title.includes(moviesNameFilter)) {\n        return movie;\n    }\n}\n\nfunction getDiscountedPrice(price) {\n    return Number(price.toFixed(2));\n}\n\nfunction handleMovieBuy(movie) {\n    const newMovies = [...moviesInBasket];\n    const movieInBasket = newMovies.find(\n        ({ title }) => title === movie.title,\n    );\n\n    if (movieInBasket) {\n        movieInBasket.count++;\n        setMoviesInBasket(newMovies);\n        const newPrice = getDiscountedPrice(\n            movieInBasket.price + basketFinalPrice,\n        );\n        setBasketFinalPrice(newPrice);\n        return;\n    }\n\n    newMovies.push({\n        title: movie.title,\n        backgroundImg: movie.poster_path,\n        price: movie.price,\n        count: 1,\n    });\n    setMoviesInBasket(newMovies);\n    const newPrice = getDiscountedPrice(movie.price + basketFinalPrice);\n    setBasketFinalPrice(newPrice);\n}\n\nfunction handleMovieAdd(movieTitle) {\n    const newMovies = [...moviesInBasket];\n    const movieInBasket = newMovies.find(\n        ({ title }) => title === movieTitle,\n    );\n\n    movieInBasket.count++;\n    setMoviesInBasket(newMovies);\n    const newPrice = getDiscountedPrice(\n        movieInBasket.price + basketFinalPrice,\n    );\n    setBasketFinalPrice(newPrice);\n}\n\nfunction handleMovieRemoval(movieTitle) {\n    const newMovies = [...moviesInBasket];\n    const movieInBasket = newMovies.find(\n        ({ title }) => title === movieTitle,\n    );\n    const newPrice = getDiscountedPrice(\n        basketFinalPrice - movieInBasket.price,\n    );\n    setBasketFinalPrice(newPrice);\n\n    movieInBasket.count--;\n    if (movieInBasket.count === 0) {\n        setMoviesInBasket(\n            newMovies.filter(({ title }) => title !== movieTitle),\n        );\n        return;\n    }\n\n    setMoviesInBasket(newMovies);\n}\n\nreturn (\n  <div className=\"App\">\n      <Navbar\n          setMoviesNameFilter={setMoviesNameFilter}\n      />\n      <main className=\"content\">\n          <div className=\"top-movies\">\n              <h2>Top Movies</h2>\n              <div className=\"movies-grid\">\n                  {movies.slice(0, 5).map((movie) => (\n                      <Card\n                          {...movie}\n                          handleMovieBuy={handleMovieBuy}\n                      />\n                  ))}\n              </div>\n          </div>\n          <div className=\"movies\">\n              <h2>Movies</h2>\n              <div className=\"movies-grid\">\n                  {movies.filter(filterMovie).map((movie) => (\n                      <Card {...movie} handleMovieBuy={handleMovieBuy} />\n                  ))}\n              </div>\n          </div>\n      </main>\n      <Cart\n          className=\"bag\"\n          moviesInBasket={moviesInBasket}\n          finalPrice={basketFinalPrice}\n          handleMovieAdd={handleMovieAdd}\n          handleMovieRemoval={handleMovieRemoval}\n      />\n  </div>\n);\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}